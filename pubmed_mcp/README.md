# PubMed æ–‡çŒ®æœç´¢ MCP Server

åŸºäº FastMCP çš„ PubMed æ–‡çŒ®æ£€ç´¢æœåŠ¡ï¼Œé€šè¿‡ NCBI E-utilities API æœç´¢åŒ»å­¦æ–‡çŒ®ï¼Œç‰¹åˆ«é€‚ç”¨äºç—…ç†å­¦ç›¸å…³çš„ç—…ä¾‹æŠ¥å‘Šå’Œä¸´åºŠç ”ç©¶æ£€ç´¢ã€‚

## ğŸ“‹ ç›®å½•

- [åŸç†æ¦‚è¿°](#åŸç†æ¦‚è¿°)
- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [API æ–‡æ¡£](#api-æ–‡æ¡£)
- [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

---

## ğŸ”¬ åŸç†æ¦‚è¿°

### PubMed æ£€ç´¢å·¥ä½œæµç¨‹

æœ¬ MCP æœåŠ¡é€šè¿‡ NCBI E-utilities API å®ç° PubMed æ–‡çŒ®æ£€ç´¢ï¼Œæ ¸å¿ƒæµç¨‹å¦‚ä¸‹ï¼š

```
æŸ¥è¯¢è¯·æ±‚ â†’ ESearch â†’ ESummary â†’ EFetch â†’ ç»“æ„åŒ–ç»“æœ
    â†“         â†“          â†“          â†“          â†“
 å…³é”®è¯   è·å–PMID   è·å–å…ƒæ•°æ®  è·å–æ‘˜è¦   JSONæ ¼å¼
```

### æ ¸å¿ƒå¤„ç†æµç¨‹

1. **æŸ¥è¯¢æ„å»º**
   - ç»„åˆç”¨æˆ·æŸ¥è¯¢å…³é”®è¯
   - æ·»åŠ å‘è¡¨ç±»å‹è¿‡æ»¤ï¼ˆé»˜è®¤ Case Reportsï¼‰
   - æ·»åŠ äººç±»ç ”ç©¶è¿‡æ»¤ï¼ˆå¯é€‰ï¼‰
   - æ„å»º PubMed å¸ƒå°”æŸ¥è¯¢

2. **æ–‡çŒ®æœç´¢ï¼ˆESearchï¼‰**
   - è°ƒç”¨ NCBI ESearch API
   - è·å–åŒ¹é…çš„ PMID åˆ—è¡¨
   - æ”¯æŒæŒ‰ç›¸å…³æ€§æˆ–æ—¶é—´æ’åº
   - æ”¯æŒæ—¶é—´èŒƒå›´é™åˆ¶

3. **å…ƒæ•°æ®è·å–ï¼ˆESummaryï¼‰**
   - æ‰¹é‡è·å–æ–‡çŒ®å…ƒæ•°æ®
   - æå–æ ‡é¢˜ã€ä½œè€…ã€æœŸåˆŠã€å¹´ä»½ç­‰ä¿¡æ¯
   - è·å– DOI å’Œ PubMed URL

4. **æ‘˜è¦è·å–ï¼ˆEFetchï¼Œå¯é€‰ï¼‰**
   - è°ƒç”¨ EFetch API è·å–å®Œæ•´æ‘˜è¦
   - è§£æ XML æ ¼å¼å“åº”
   - æå– AbstractText å†…å®¹

5. **ç»“æœæ ¼å¼åŒ–**
   - åˆå¹¶å…ƒæ•°æ®å’Œæ‘˜è¦
   - æ ¼å¼åŒ–ä¸º JSON æ ¼å¼
   - è¿”å›ç»“æ„åŒ–ç»“æœ

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### `search_pubmed` - PubMed æ–‡çŒ®æœç´¢

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- ğŸ” **å…³é”®è¯æœç´¢**: æ”¯æŒè‡ªç„¶è¯­è¨€å…³é”®è¯å’Œå¸ƒå°”æŸ¥è¯¢
- ğŸ“š **å‘è¡¨ç±»å‹è¿‡æ»¤**: é»˜è®¤è¿‡æ»¤ Case Reportsï¼Œå¯è‡ªå®šä¹‰
- â° **æ—¶é—´èŒƒå›´é™åˆ¶**: æ”¯æŒé™åˆ¶è¿‘ N å¤©å†…çš„æ–‡çŒ®
- ğŸ“Š **æ’åºæ–¹å¼**: æŒ‰ç›¸å…³æ€§æˆ–æ—¶é—´æ’åº
- ğŸ“„ **æ‘˜è¦è·å–**: å¯é€‰è·å–å®Œæ•´æ‘˜è¦
- ğŸ‘¤ **äººç±»ç ”ç©¶è¿‡æ»¤**: å¯é€‰é™å®šäººç±»ç ”ç©¶

**é»˜è®¤é…ç½®**ï¼š
- å‘è¡¨ç±»å‹ï¼šCase Reportsï¼ˆç—…ä¾‹æŠ¥å‘Šï¼‰
- æ—¶é—´èŒƒå›´ï¼šè¿‘ 365 å¤©
- æ’åºæ–¹å¼ï¼šæŒ‰æ—¶é—´æ’åºï¼ˆæœ€æ–°ä¼˜å…ˆï¼‰
- åŒ…å«æ‘˜è¦ï¼šæ˜¯
- äººç±»ç ”ç©¶ï¼šæ˜¯

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯é€‰å‹ | ç‰ˆæœ¬è¦æ±‚ | ç”¨é€” |
|------|---------|---------|------|
| **æ¡†æ¶** | FastMCP | >= 2.13.0 | MCP åè®®æœåŠ¡å™¨æ¡†æ¶ |
| **HTTP å®¢æˆ·ç«¯** | requests | Latest | è°ƒç”¨ NCBI API |
| **XML è§£æ** | xml.etree.ElementTree | æ ‡å‡†åº“ | è§£ææ‘˜è¦ XML |
| **æ•°æ®æ ¼å¼** | JSON | æ ‡å‡†åº“ | ç»“æ„åŒ–æ•°æ®è¾“å‡º |
| **API** | NCBI E-utilities | - | PubMed æ•°æ®æº |

### ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Nexent Platform                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Frontend    â”‚ â”€â”€â”€â”€â”€â”€> â”‚  MCP Client (SSE)       â”‚ â”‚
â”‚  â”‚  (è¾“å…¥æŸ¥è¯¢)   â”‚         â”‚  http://host:18920/sse   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PubMed Search MCP Server                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  FastMCP Server (server.py)                     â”‚   â”‚
â”‚  â”‚  - search_pubmed(query, ...)                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â–¼                                                 â–¼   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ NCBI E-utilities â”‚              â”‚ ç»“æœæ ¼å¼åŒ–      â”‚ â”‚
â”‚  â”‚ API Client       â”‚              â”‚                â”‚ â”‚
â”‚  â”‚                  â”‚              â”‚                â”‚ â”‚
â”‚  â”‚ - ESearch        â”‚              â”‚ - JSON è¾“å‡º    â”‚ â”‚
â”‚  â”‚ - ESummary       â”‚              â”‚ - å…ƒæ•°æ®åˆå¹¶    â”‚ â”‚
â”‚  â”‚ - EFetch         â”‚              â”‚ - é”™è¯¯å¤„ç†      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  NCBI PubMed  â”‚
                    â”‚    Database   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### NCBI E-utilities API

æœ¬æœåŠ¡ä½¿ç”¨ NCBI E-utilities çš„ä¸‰ä¸ªä¸»è¦ APIï¼š

1. **ESearch**: æœç´¢æ–‡çŒ®å¹¶è·å– PMID åˆ—è¡¨
2. **ESummary**: æ‰¹é‡è·å–æ–‡çŒ®å…ƒæ•°æ®
3. **EFetch**: è·å–å®Œæ•´æ‘˜è¦ï¼ˆXML æ ¼å¼ï¼‰

**API é™åˆ¶**ï¼š
- æ—  API Keyï¼šæ¯ç§’ 3 æ¬¡è¯·æ±‚
- æœ‰ API Keyï¼šæ¯ç§’ 10 æ¬¡è¯·æ±‚
- å»ºè®®é…ç½® `NCBI_API_KEY` ç¯å¢ƒå˜é‡ä»¥æå‡é€Ÿç‡

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Python 3.9+
- ç½‘ç»œè¿æ¥ï¼ˆè®¿é—® NCBI APIï¼‰
- FastMCP å’Œ requests åº“

### æ­¥éª¤ 1: ç¯å¢ƒå‡†å¤‡

```bash
# åˆ›å»º conda ç¯å¢ƒï¼ˆå¯é€‰ï¼‰
conda create -n mcp-env python=3.11 -y
conda activate mcp-env

# å®‰è£…ä¾èµ–
cd ~/mcp/pubmed_mcp
pip install -r requirements.txt
```

### æ­¥éª¤ 2: é…ç½® API Keyï¼ˆå¯é€‰ä½†æ¨èï¼‰

é…ç½® NCBI API Key å¯ä»¥æå‡è¯·æ±‚é€Ÿç‡é™åˆ¶ï¼ˆä»æ¯ç§’ 3 æ¬¡æå‡åˆ° 10 æ¬¡ï¼‰ï¼š

```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export NCBI_API_KEY=your_api_key_here

# æˆ–æ·»åŠ åˆ° ~/.bashrc
echo 'export NCBI_API_KEY=your_api_key_here' >> ~/.bashrc
source ~/.bashrc
```

**è·å– API Key**ï¼š
1. è®¿é—® https://www.ncbi.nlm.nih.gov/account/
2. æ³¨å†Œ/ç™»å½•è´¦å·
3. åœ¨è´¦æˆ·è®¾ç½®ä¸­ç”Ÿæˆ API Key

### æ­¥éª¤ 3: å¯åŠ¨æœåŠ¡å™¨

```bash
python server.py
```

æœåŠ¡å™¨å°†å¯åŠ¨åœ¨ `http://0.0.0.0:18920/sse`

**éªŒè¯æœåŠ¡å™¨è¿è¡Œ**ï¼š
```bash
# æ£€æŸ¥æ—¥å¿—è¾“å‡º
# åº”è¯¥çœ‹åˆ°ï¼š
# - FastMCP server started
# - Uvicorn running on http://0.0.0.0:18920
```

### æ­¥éª¤ 4: Nexent å¹³å°é…ç½®

åœ¨ Nexent å¹³å°ä¸­é…ç½® MCP æœåŠ¡å™¨ï¼š

1. **MCP æœåŠ¡å™¨ URL**: 
   - å¦‚æœ Nexent åœ¨ Docker ä¸­ï¼š`http://172.17.0.1:18920/sse`
   - å¦‚æœåŒæœºè¿è¡Œï¼š`http://localhost:18920/sse`

2. **å·¥å…·åç§°**: `search_pubmed`

---

## ğŸ“š API æ–‡æ¡£

### å·¥å…·: `search_pubmed`

**æè¿°**: æœç´¢ PubMed æ•°æ®åº“ï¼Œè¿”å›æ–‡çŒ®å…ƒæ•°æ®å’Œæ‘˜è¦ï¼ˆå¯é€‰ï¼‰ã€‚

**å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| `query` | string | æ˜¯ | - | æœç´¢å…³é”®è¯æˆ–å¸ƒå°”æŸ¥è¯¢ä¸²ï¼ˆPubMed æ”¯æŒçš„å…³é”®è¯å’Œ MeSH æœ¯è¯­ï¼‰ |
| `max_results` | integer | å¦ | 10 | è¿”å›ç»“æœæ•°é‡ä¸Šé™ï¼ŒèŒƒå›´ 1-50 |
| `pubtype` | string | å¦ | "Case Reports" | å‘è¡¨ç±»å‹è¿‡æ»¤ï¼Œå¸¸è§å€¼ï¼š<br>- "Case Reports"ï¼ˆç—…ä¾‹æŠ¥å‘Šï¼‰<br>- "Clinical Trial"ï¼ˆä¸´åºŠè¯•éªŒï¼‰<br>- "Review"ï¼ˆç»¼è¿°ï¼‰<br>- "Meta-Analysis"ï¼ˆèŸèƒåˆ†æï¼‰<br>- `null` è¡¨ç¤ºä¸è¿‡æ»¤ |
| `days_back` | integer | å¦ | 365 | é™åˆ¶è¿‘ N å¤©å†…å‘è¡¨çš„æ–‡çŒ®ï¼Œ0 è¡¨ç¤ºä¸é™åˆ¶ |
| `sort` | string | å¦ | "date" | æ’åºæ–¹å¼ï¼š<br>- "date"ï¼šæŒ‰å‘è¡¨æ—¶é—´æ’åºï¼ˆæœ€æ–°ä¼˜å…ˆï¼‰<br>- "relevance"ï¼šæŒ‰ç›¸å…³æ€§æ’åº |
| `include_abstract` | boolean | å¦ | true | æ˜¯å¦åŒ…å«æ‘˜è¦ï¼ˆä¼šå¢åŠ  API è°ƒç”¨æ—¶é—´ï¼‰ |
| `humans_only` | boolean | å¦ | true | æ˜¯å¦é™å®šäººç±»ç ”ç©¶ï¼ˆæ·»åŠ  humans[MeSH Terms] è¿‡æ»¤ï¼‰ |

**è¿”å›æ ¼å¼**:

```json
[
  {
    "pmid": "12345678",
    "title": "A rare case of pulmonary adenocarcinoma with EGFR mutation",
    "journal": "Journal of Pathology",
    "year": "2024",
    "authors": ["Smith, John", "Doe, Jane"],
    "pubtype": ["Case Reports"],
    "doi": "10.1234/jpath.2024.12345",
    "url": "https://pubmed.ncbi.nlm.nih.gov/12345678/",
    "abstract": "This case report describes a rare presentation of pulmonary adenocarcinoma..."
  },
  {
    "pmid": "12345679",
    "title": "Another case report...",
    ...
  }
]
```

**å­—æ®µè¯´æ˜**:
- `pmid`: PubMed IDï¼ˆå”¯ä¸€æ ‡è¯†ç¬¦ï¼‰
- `title`: æ–‡çŒ®æ ‡é¢˜
- `journal`: æœŸåˆŠåç§°
- `year`: å‘è¡¨å¹´ä»½
- `authors`: ä½œè€…åˆ—è¡¨
- `pubtype`: å‘è¡¨ç±»å‹æ•°ç»„
- `doi`: DOI å·ï¼ˆå¦‚æœæœ‰ï¼‰
- `url`: PubMed é“¾æ¥
- `abstract`: æ‘˜è¦æ–‡æœ¬ï¼ˆå¦‚æœ `include_abstract=true`ï¼‰

**é”™è¯¯å“åº”**:

```json
{
  "error": "esearch failed: Connection timeout"
}
```

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: æœç´¢ç—…ä¾‹æŠ¥å‘Šï¼ˆé»˜è®¤é…ç½®ï¼‰

**æŸ¥è¯¢**: "pulmonary adenocarcinoma EGFR mutation"

**è°ƒç”¨**ï¼š
```json
{
  "tool": "search_pubmed",
  "parameters": {
    "query": "pulmonary adenocarcinoma EGFR mutation",
    "max_results": 10
  }
}
```

**è¯´æ˜**: ä½¿ç”¨é»˜è®¤é…ç½®ï¼š
- å‘è¡¨ç±»å‹ï¼šCase Reports
- æ—¶é—´èŒƒå›´ï¼šè¿‘ 365 å¤©
- æ’åºï¼šæŒ‰æ—¶é—´æ’åº
- åŒ…å«æ‘˜è¦ï¼šæ˜¯
- äººç±»ç ”ç©¶ï¼šæ˜¯

### ç¤ºä¾‹ 2: æœç´¢ä¸´åºŠè¯•éªŒ

**æŸ¥è¯¢**: "lung cancer immunotherapy"

**è°ƒç”¨**ï¼š
```json
{
  "tool": "search_pubmed",
  "parameters": {
    "query": "lung cancer immunotherapy",
    "pubtype": "Clinical Trial",
    "max_results": 20,
    "days_back": 180,
    "sort": "relevance"
  }
}
```

### ç¤ºä¾‹ 3: æœç´¢ç»¼è¿°ï¼ˆä¸é™åˆ¶æ—¶é—´ï¼‰

**æŸ¥è¯¢**: "pathology artificial intelligence"

**è°ƒç”¨**ï¼š
```json
{
  "tool": "search_pubmed",
  "parameters": {
    "query": "pathology artificial intelligence",
    "pubtype": "Review",
    "max_results": 15,
    "days_back": 0,
    "sort": "relevance",
    "include_abstract": true
  }
}
```

### ç¤ºä¾‹ 4: å¸ƒå°”æŸ¥è¯¢

**æŸ¥è¯¢**: "(lung OR pulmonary) AND (adenocarcinoma OR NSCLC) AND EGFR"

**è°ƒç”¨**ï¼š
```json
{
  "tool": "search_pubmed",
  "parameters": {
    "query": "(lung OR pulmonary) AND (adenocarcinoma OR NSCLC) AND EGFR",
    "max_results": 10
  }
}
```

### ç¤ºä¾‹ 5: ä¸åŒ…å«æ‘˜è¦ï¼ˆå¿«é€Ÿæœç´¢ï¼‰

**è°ƒç”¨**ï¼š
```json
{
  "tool": "search_pubmed",
  "parameters": {
    "query": "pathology diagnosis",
    "max_results": 20,
    "include_abstract": false
  }
}
```

**ä¼˜åŠ¿**: ä¸è°ƒç”¨ EFetch APIï¼Œå“åº”æ›´å¿«

---

## âš™ï¸ é…ç½®è¯´æ˜

### æœåŠ¡å™¨é…ç½®

- **ç«¯å£**: 18920
- **åè®®**: SSE (Server-Sent Events)
- **ç›‘å¬åœ°å€**: `0.0.0.0:18920/sse`

### API Key é…ç½®

**ç¯å¢ƒå˜é‡æ–¹å¼**ï¼ˆæ¨èï¼‰ï¼š
```bash
export NCBI_API_KEY=your_api_key_here
```

**æ•ˆæœ**ï¼š
- æ—  API Keyï¼šæ¯ç§’ 3 æ¬¡è¯·æ±‚
- æœ‰ API Keyï¼šæ¯ç§’ 10 æ¬¡è¯·æ±‚

### è¶…æ—¶è®¾ç½®

- **ESearch/ESummary**: 12 ç§’
- **EFetch**: 15 ç§’ï¼ˆè·å–æ‘˜è¦éœ€è¦æ›´é•¿æ—¶é—´ï¼‰

### æ”¯æŒçš„å‘è¡¨ç±»å‹

PubMed æ”¯æŒå¤šç§å‘è¡¨ç±»å‹è¿‡æ»¤ï¼Œå¸¸è§å€¼ï¼š

- `Case Reports` - ç—…ä¾‹æŠ¥å‘Šï¼ˆé»˜è®¤ï¼‰
- `Clinical Trial` - ä¸´åºŠè¯•éªŒ
- `Review` - ç»¼è¿°
- `Meta-Analysis` - èŸèƒåˆ†æ
- `Systematic Review` - ç³»ç»Ÿç»¼è¿°
- `Randomized Controlled Trial` - éšæœºå¯¹ç…§è¯•éªŒ
- `Observational Study` - è§‚å¯Ÿæ€§ç ”ç©¶

å®Œæ•´åˆ—è¡¨è¯·å‚è€ƒ [PubMed Publication Types](https://www.ncbi.nlm.nih.gov/books/NBK3827/table/pubmedhelp.T.publication_types/)

---

## ğŸ” æ•…éšœæ’é™¤

### 1. API è¯·æ±‚å¤±è´¥

**é”™è¯¯**: `Connection timeout` æˆ– `HTTP Error`

**å¯èƒ½åŸå› **:
- ç½‘ç»œè¿æ¥é—®é¢˜
- NCBI API æœåŠ¡æš‚æ—¶ä¸å¯ç”¨
- é˜²ç«å¢™é˜»æ­¢

**è§£å†³**:
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- éªŒè¯èƒ½å¦è®¿é—® https://eutils.ncbi.nlm.nih.gov
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
- ç¨åé‡è¯•

### 2. é€Ÿç‡é™åˆ¶é”™è¯¯

**é”™è¯¯**: `429 Too Many Requests`

**å¯èƒ½åŸå› **:
- è¯·æ±‚è¿‡äºé¢‘ç¹
- æœªé…ç½® API Key

**è§£å†³**:
- é…ç½® `NCBI_API_KEY` ç¯å¢ƒå˜é‡
- é™ä½è¯·æ±‚é¢‘ç‡
- å¢åŠ è¯·æ±‚é—´éš”

### 3. æŸ¥è¯¢æ— ç»“æœ

**é—®é¢˜**: è¿”å›ç©ºæ•°ç»„ `[]`

**å¯èƒ½åŸå› **:
- æŸ¥è¯¢å…³é”®è¯ä¸åŒ¹é…
- è¿‡æ»¤æ¡ä»¶è¿‡äºä¸¥æ ¼
- æ—¶é—´èŒƒå›´é™åˆ¶å¤ªçŸ­

**è§£å†³**:
- å°è¯•æ›´é€šç”¨çš„å…³é”®è¯
- æ”¾å®½è¿‡æ»¤æ¡ä»¶ï¼ˆå¦‚ `pubtype: null`ï¼‰
- å¢åŠ  `days_back` æˆ–è®¾ä¸º 0
- æ£€æŸ¥æ‹¼å†™é”™è¯¯

### 4. æ‘˜è¦è·å–å¤±è´¥

**é—®é¢˜**: è¿”å›ç»“æœä¸­ `abstract` å­—æ®µä¸ºç©º

**å¯èƒ½åŸå› **:
- æ–‡çŒ®æ²¡æœ‰æ‘˜è¦
- EFetch API è°ƒç”¨å¤±è´¥
- XML è§£æé”™è¯¯

**è§£å†³**:
- æ£€æŸ¥ `abstract_error` å­—æ®µï¼ˆå¦‚æœæœ‰ï¼‰
- æŸäº›æ–‡çŒ®å¯èƒ½ç¡®å®æ²¡æœ‰æ‘˜è¦
- å¯ä»¥è®¾ç½® `include_abstract: false` è·³è¿‡æ‘˜è¦è·å–

### 5. ç«¯å£è¢«å ç”¨

**é”™è¯¯**: `Address already in use`

**è§£å†³**:
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :18920

# æ€æ­»è¿›ç¨‹
kill -9 <PID>

# æˆ–ä¿®æ”¹ server.py ä¸­çš„ç«¯å£å·
```

### 6. Nexent è¿æ¥å¤±è´¥

**é—®é¢˜**: Nexent å¹³å°æ— æ³•è¿æ¥åˆ° MCP æœåŠ¡å™¨

**è§£å†³**:
- æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œ
- ç¡®è®¤ç½‘ç»œé…ç½®ï¼ˆDocker ç¯å¢ƒéœ€è¦é…ç½® `172.17.0.1`ï¼‰
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

---

## ğŸ“ å¼€å‘è¯´æ˜

### æ‰©å±•åŠŸèƒ½

å¯ä»¥æ‰©å±•ä»¥ä¸‹åŠŸèƒ½ï¼š

1. **æ·»åŠ æ›´å¤šè¿‡æ»¤æ¡ä»¶**
   - æœŸåˆŠè¿‡æ»¤
   - ä½œè€…è¿‡æ»¤
   - è¯­è¨€è¿‡æ»¤

2. **ç»“æœç¼“å­˜**
   - ç¼“å­˜å¸¸è§æŸ¥è¯¢ç»“æœ
   - å‡å°‘ API è°ƒç”¨

3. **æ‰¹é‡æœç´¢**
   - æ”¯æŒå¤šä¸ªæŸ¥è¯¢åŒæ—¶æœç´¢
   - ç»“æœåˆå¹¶å’Œå»é‡

4. **ç»“æœå¯¼å‡º**
   - å¯¼å‡ºä¸º BibTeX æ ¼å¼
   - å¯¼å‡ºä¸º RIS æ ¼å¼
   - å¯¼å‡ºä¸º CSV æ ¼å¼

### é¡¹ç›®ç»“æ„

```
pubmed_mcp/
â”œâ”€â”€ server.py          # FastMCP æœåŠ¡å™¨ä¸»æ–‡ä»¶
â”œâ”€â”€ requirements.txt   # Python ä¾èµ–
â””â”€â”€ README.md         # æœ¬æ–‡æ¡£
```

### API è°ƒç”¨æµç¨‹

```python
# 1. ESearch - æœç´¢å¹¶è·å– PMID
ids = _esearch(query, max_results, days_back, sort)

# 2. ESummary - è·å–å…ƒæ•°æ®
meta = _esummary(ids)

# 3. EFetch - è·å–æ‘˜è¦ï¼ˆå¯é€‰ï¼‰
abstracts = _efetch_abstracts(ids) if include_abstract else {}

# 4. åˆå¹¶ç»“æœ
results = merge(meta, abstracts)
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### å…¸å‹æ€§èƒ½

- **æ— æ‘˜è¦æœç´¢**: ~1-2 ç§’ï¼ˆ10 æ¡ç»“æœï¼‰
- **å«æ‘˜è¦æœç´¢**: ~2-4 ç§’ï¼ˆ10 æ¡ç»“æœï¼‰
- **API è°ƒç”¨æ¬¡æ•°**: 
  - æ— æ‘˜è¦ï¼š2 æ¬¡ï¼ˆESearch + ESummaryï¼‰
  - å«æ‘˜è¦ï¼š3 æ¬¡ï¼ˆESearch + ESummary + EFetchï¼‰

### é€Ÿç‡é™åˆ¶

- **æ—  API Key**: æ¯ç§’ 3 æ¬¡è¯·æ±‚
- **æœ‰ API Key**: æ¯ç§’ 10 æ¬¡è¯·æ±‚

---

## ğŸ“„ è®¸å¯è¯

è¯·å‚è€ƒé¡¹ç›®æ ¹ç›®å½•çš„ LICENSE æ–‡ä»¶ã€‚

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ GitHub Issues è”ç³»ã€‚

---

## ğŸ”— ç›¸å…³èµ„æº

- [NCBI E-utilities æ–‡æ¡£](https://www.ncbi.nlm.nih.gov/books/NBK25497/)
- [PubMed æœç´¢è¯­æ³•](https://pubmed.ncbi.nlm.nih.gov/help/)
- [MeSH æœ¯è¯­](https://www.ncbi.nlm.nih.gov/mesh/)

---

**æœ€åæ›´æ–°**: 2025-12-07
